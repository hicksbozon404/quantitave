<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantitative Methods for Inventory Management</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: "Calm Harmony" - Using warm neutrals (amber, stone) for the background and base, with a professional and calming blue as the primary accent for interactive elements and highlights. -->
    <!-- Application Structure Plan: A single-page application with a tab-based navigation. This structure was chosen to logically segment the distinct tools (EOQ, ROP, Metrics, ABC Analysis) and the new learning content (Notes, Questions). This task-oriented design allows a user (student) to focus on one concept, its calculations, or practice questions at a time, which is more effective for learning and exam preparation. The flow encourages interaction with each calculator to understand cause-and-effect relationships (e.g., how changing holding cost affects EOQ) and provides immediate feedback for quiz questions. -->
    <!-- Visualization & Content Choices:
        - EOQ Model: Goal is to visualize the cost trade-off. Method is an interactive calculator with a Chart.js line chart showing Holding, Ordering, and Total Cost curves. This visual relationship is key to understanding the EOQ concept. Interaction is real-time updates of the chart and result as user types.
        - ROP/Safety Stock: Goal is to clarify when to order and the need for a buffer. Method is a simple calculator with clear input/output fields. Interaction is instant calculation to demonstrate the impact of lead time and demand variability.
        - Performance Metrics: Goal is to calculate key efficiency ratios. Method is a calculator for ITR and DSI. Interaction provides immediate feedback on performance.
        - ABC Analysis: Goal is to show item categorization by value. Method is an interactive table where users can input data. A Chart.js pie chart visualizes the value distribution, reinforcing the Pareto Principle.
        - Notes & Explanations: Goal is to provide concise study material. Method is structured text with clear headings. No direct interaction beyond scrolling, serving as a reference.
        - Exam Standard Questions: Goal is to provide interactive practice.
            - Theory MCQs: Method is dynamically generated questions with radio buttons. Interaction includes immediate feedback on correctness, and detailed explanations for *wrong* answers, encouraging active learning and correction.
            - Calculation Questions: Method is all questions displayed. Interaction is a "Show Answer" button that reveals a step-by-step, detailed solution, allowing self-assessment.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. All visuals are implemented with Chart.js on Canvas elements or structured HTML/CSS.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            height: 300px;
            max-height: 400px;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
            font-weight: 600;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .question-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
        }
        .correct {
            background-color: #d1fae5; /* Green-100 */
            color: #065f46; /* Green-800 */
        }
        .wrong {
            background-color: #fee2e2; /* Red-100 */
            color: #991b1b; /* Red-800 */
        }
        .solution-container {
            display: none;
            background-color: #f0f9ff; /* Blue-50 */
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.5rem;
        }
        .solution-container.active {
            display: block;
        }
        .formula {
            font-family: 'Times New Roman', serif; /* Or another suitable serif font for formulas */
            font-style: italic;
            margin: 0.5em 0;
            display: block;
        }
    </style>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>
<body class="bg-amber-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Quantitative Methods Dashboard</h1>
            <p class="text-lg text-gray-600 mt-2">Interactive Tools for Inventory Management - Designed by HICKS BOZON404</p>
        </header>

        <nav class="mb-8 border-b border-gray-200">
            <ul class="flex flex-wrap -mb-px justify-center text-sm font-medium text-center text-gray-500">
                <li class="mr-2">
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 active" data-target="eoq">EOQ Calculator</a>
                </li>
                <li class="mr-2">
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" data-target="rop">ROP & Safety Stock</a>
                </li>
                <li class="mr-2">
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" data-target="metrics">Performance Metrics</a>
                </li>
                <li class="mr-2">
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" data-target="abc">ABC Analysis</a>
                </li>
                <li class="mr-2">
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" data-target="notes">Notes & Explanations</a>
                </li>
                <li>
                    <a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300" data-target="questions">Exam Questions</a>
                </li>
            </ul>
        </nav>

        <main>
            <!-- EOQ Section -->
            <section id="eoq" class="content-section active">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-2">Economic Order Quantity (EOQ)</h2>
                    <p class="text-gray-600 mb-6">This tool helps you find the optimal order size that minimizes total inventory costs by balancing holding costs and ordering costs. Adjust the inputs to see how the EOQ changes.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label for="eoqD" class="block text-sm font-medium text-gray-700">Annual Demand (D)</label>
                            <input type="number" id="eoqD" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="10000">
                        </div>
                        <div>
                            <label for="eoqS" class="block text-sm font-medium text-gray-700">Ordering Cost per Order (S)</label>
                            <input type="number" id="eoqS" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="50">
                        </div>
                        <div>
                            <label for="eoqH" class="block text-sm font-medium text-gray-700">Holding Cost per Unit/Year (H)</label>
                            <input type="number" id="eoqH" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="2">
                        </div>
                    </div>
                    <div class="bg-amber-100 p-4 rounded-lg text-center mb-6">
                        <p class="text-lg text-gray-700">Economic Order Quantity (EOQ):</p>
                        <p id="eoqResult" class="text-3xl font-bold text-blue-600">707.11 units</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="eoqChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- ROP Section -->
            <section id="rop" class="content-section">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-2">Reorder Point (ROP) & Safety Stock</h2>
                    <p class="text-gray-600 mb-6">Calculate when to place an order (ROP) and the buffer stock needed (Safety Stock) to protect against variability in demand and lead time.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Inputs</h3>
                            <div class="space-y-4">
                                <div>
                                    <label for="ropAvgDemand" class="block text-sm font-medium text-gray-700">Average Daily Demand</label>
                                    <input type="number" id="ropAvgDemand" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="50">
                                </div>
                                <div>
                                    <label for="ropLeadTime" class="block text-sm font-medium text-gray-700">Average Lead Time (days)</label>
                                    <input type="number" id="ropLeadTime" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="10">
                                </div>
                                <div>
                                    <label for="ropMaxDemand" class="block text-sm font-medium text-gray-700">Maximum Daily Usage</label>
                                    <input type="number" id="ropMaxDemand" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="70">
                                </div>
                                <div>
                                    <label for="ropMaxLeadTime" class="block text-sm font-medium text-gray-700">Maximum Lead Time (days)</label>
                                    <input type="number" id="ropMaxLeadTime" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="12">
                                </div>
                            </div>
                        </div>
                        <div class="bg-amber-100 p-6 rounded-lg flex flex-col justify-center">
                            <div class="text-center mb-6">
                                <p class="text-lg text-gray-700">Safety Stock:</p>
                                <p id="safetyStockResult" class="text-3xl font-bold text-blue-600">340 units</p>
                            </div>
                            <div class="text-center">
                                <p class="text-lg text-gray-700">Reorder Point (ROP):</p>
                                <p id="ropResult" class="text-3xl font-bold text-blue-600">840 units</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Metrics Section -->
            <section id="metrics" class="content-section">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-2">Inventory Performance Metrics</h2>
                    <p class="text-gray-600 mb-6">Assess the efficiency of your inventory management with the Inventory Turnover Ratio (ITR) and Days Sales of Inventory (DSI).</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label for="metricsCOGS" class="block text-sm font-medium text-gray-700">Cost of Goods Sold (COGS)</label>
                            <input type="number" id="metricsCOGS" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="500000">
                        </div>
                        <div>
                            <label for="metricsBeginInv" class="block text-sm font-medium text-gray-700">Beginning Inventory</label>
                            <input type="number" id="metricsBeginInv" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="80000">
                        </div>
                        <div>
                            <label for="metricsEndInv" class="block text-sm font-medium text-gray-700">Ending Inventory</label>
                            <input type="number" id="metricsEndInv" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" value="120000">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-amber-100 p-4 rounded-lg text-center">
                            <p class="text-lg text-gray-700">Inventory Turnover Ratio (ITR):</p>
                            <p id="itrResult" class="text-3xl font-bold text-blue-600">5 times</p>
                        </div>
                        <div class="bg-amber-100 p-4 rounded-lg text-center">
                            <p class="text-lg text-gray-700">Days Sales of Inventory (DSI):</p>
                            <p id="dsiResult" class="text-3xl font-bold text-blue-600">73 days</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ABC Analysis Section -->
            <section id="abc" class="content-section">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-2">ABC Analysis</h2>
                    <p class="text-gray-600 mb-6">Categorize your inventory items based on their value to prioritize management efforts. Class 'A' items are the most valuable. Add or remove items to see how the classification changes.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Demand</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unit Cost</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="abcTableBody" class="bg-white divide-y divide-gray-200">
                                        <!-- Rows will be added by JS -->
                                    </tbody>
                                </table>
                            </div>
                            <button id="addAbcRow" class="mt-4 bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">Add Item</button>
                        </div>
                        <div class="flex flex-col">
                            <div id="abcResultsContainer" class="bg-amber-100 p-4 rounded-lg mb-4 flex-grow">
                                <h3 class="font-semibold text-lg mb-2">Classification Results</h3>
                                <div id="abcResults" class="space-y-1"></div>
                            </div>
                             <div class="chart-container !h-64 md:!h-72">
                                <canvas id="abcChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notes & Explanations Section -->
            <section id="notes" class="content-section">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4">Notes & Explanations: Quantitative Methods in Inventory Management</h2>
                    <p class="text-gray-600 mb-6">This section provides a concise overview of key quantitative methods used in inventory management. Understanding these concepts and formulas is crucial for optimizing inventory levels, reducing costs, and improving operational efficiency.</p>

                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-bold mb-2">1. Introduction to Inventory Management</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**What is Inventory?** Stock of items or resources used in an organization.
                                    <ul class="list-circle ml-6">
                                        <li>**Types:** Raw Materials, Work-In-Process (WIP), Finished Goods, Maintenance, Repair, and Operating (MRO) supplies.</li>
                                    </ul>
                                </li>
                                <li>**Why Hold Inventory?** Meet customer demand (avoid stockouts), take advantage of economies of scale (bulk discounts), hedge against price increases or supply disruptions, decouple production stages.</li>
                                <li>**Why Minimize Inventory?** High Costs (storage, insurance, obsolescence, damage, theft), ties up capital, hides inefficiencies, risk of obsolescence or spoilage.</li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">2. Inventory Costs</h3>
                            <p class="text-gray-700">Understanding these costs is fundamental to making optimal inventory decisions.</p>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**A. Holding (Carrying) Costs ($H$)**
                                    <ul class="list-circle ml-6">
                                        <li>**Definition:** Costs associated with keeping inventory in stock.</li>
                                        <li>**Components:** Cost of capital, storage, insurance, taxes, obsolescence, spoilage, damage, shrinkage.</li>
                                        <li>**Calculation:** Often expressed as a cost per unit per year, or a percentage of the item's value per year.</li>
                                    </ul>
                                </li>
                                <li>**B. Ordering (Setup) Costs ($S$)**
                                    <ul class="list-circle ml-6">
                                        <li>**Definition:** Costs incurred each time an order is placed (for purchased items) or a production run is set up (for manufactured items).</li>
                                        <li>**Components:** Administrative costs, transportation/shipping (per order), receiving/inspection.</li>
                                        <li>**Calculation:** A fixed cost per order placed.</li>
                                    </ul>
                                </li>
                                <li>**C. Shortage (Stockout) Costs**
                                    <ul class="list-circle ml-6">
                                        <li>**Definition:** Costs incurred when demand cannot be met due to insufficient inventory.</li>
                                        <li>**Components:** Lost sales, loss of customer goodwill, expedited shipping, production delays.</li>
                                        <li>**Calculation:** Often difficult to quantify accurately.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">3. Demand Forecasting (Brief Overview)</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**Definition:** Estimating future customer demand for products.</li>
                                <li>**Importance:** Accurate forecasts are crucial inputs for all inventory models.</li>
                                <li>**Key Concepts:** Average Daily Demand, Lead Time, Demand Variability, Lead Time Variability.</li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">4. Basic Inventory Control Models & Calculations</h3>
                            <p class="text-gray-700">These models help determine *when* to order and *how much* to order.</p>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**A. Economic Order Quantity (EOQ)**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Determines the optimal order quantity that minimizes total annual inventory costs (holding + ordering).</li>
                                        <li>**Assumptions:** Constant demand, constant lead time, fixed costs, no stockouts/discounts.</li>
                                        <li>**Formula:** <span class="formula">EOQ = &radic;(2DS/H)</span></li>
                                    </ul>
                                </li>
                                <li>**B. Reorder Point (ROP)**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Inventory level at which a new order must be placed.</li>
                                        <li>**Formula (without Safety Stock):** <span class="formula">ROP = Average Daily Demand &times; Lead Time (in days)</span></li>
                                        <li>**Formula (with Safety Stock):** <span class="formula">ROP = (Average Daily Demand &times; Lead Time) + Safety Stock</span></li>
                                    </ul>
                                </li>
                                <li>**C. Safety Stock (SS)**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Extra inventory to prevent stockouts due to unexpected demand/lead time.</li>
                                        <li>**Simple Formula:** <span class="formula">Safety Stock = (Maximum Daily Usage &times; Maximum Lead Time) - (Average Daily Usage &times; Average Lead Time)</span></li>
                                        <li>**Advanced Formula (Service Level):** <span class="formula">Safety Stock = Z &times; &sigma;<sub>dLT</sub></span> (Z-score for service level, &sigma;<sub>dLT</sub> = Standard deviation of demand during lead time).</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">5. Inventory Performance Metrics & Ratios</h3>
                            <p class="text-gray-700">These metrics help assess the efficiency and effectiveness of inventory management.</p>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**A. Inventory Turnover Ratio (ITR)**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Measures how many times inventory is sold and replaced over a period. Higher is generally better.</li>
                                        <li>**Formula:** <span class="formula">ITR = Cost of Goods Sold (COGS) / Average Inventory Value</span></li>
                                    </ul>
                                </li>
                                <li>**B. Days Sales of Inventory (DSI) / Days Inventory Outstanding (DIO)**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Measures average days to convert inventory into sales. Lower is generally better.</li>
                                        <li>**Formula:** <span class="formula">DSI = (Average Inventory Value / Cost of Goods Sold (COGS)) &times; 365 days</span></li>
                                    </ul>
                                </li>
                                <li>**C. Service Level:** Probability of meeting customer demand from existing stock without a stockout. Higher service levels require higher safety stock.</li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">6. Inventory Classification Methods</h3>
                            <p class="text-gray-700">These methods help prioritize management efforts based on item importance.</p>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**A. ABC Analysis**
                                    <ul class="list-circle ml-6">
                                        <li>**Purpose:** Categorizes inventory items into three classes (A, B, C) based on their annual consumption value (Pareto Principle).</li>
                                        <li>**Class A Items:** High-value (small % of items, large % of value). Tight control.</li>
                                        <li>**Class B Items:** Medium-value. Moderate control.</li>
                                        <li>**Class C Items:** Low-value (large % of items, small % of value). Simpler control.</li>
                                        <li>**Steps/Calculations:** Calculate Annual Usage Value (AUV), rank, calculate cumulative percentages of AUV and items, then classify.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div>
                            <h3 class="text-xl font-bold mb-2">7. Other Inventory Concepts (Quantitative Aspects)</h3>
                            <ul class="list-disc ml-6 text-gray-700 space-y-1">
                                <li>**Just-in-Time (JIT) Inventory:** Philosophy to minimize inventory by receiving/producing only when needed. Requires reliable suppliers, minimal lead times, accurate forecasting.</li>
                                <li>**Perpetual vs. Periodic Inventory Systems:**
                                    <ul class="list-circle ml-6">
                                        <li>**Perpetual:** Continuously updated records (real-time).</li>
                                        <li>**Periodic:** Counted/updated at fixed intervals.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Exam Questions Section -->
            <section id="questions" class="content-section">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4">Exam Standard Questions</h2>
                    <p class="text-gray-600 mb-6">Test your knowledge with these practice questions. For theory, select an answer and get instant feedback. For calculations, try to solve first, then reveal the detailed solution.</p>

                    <!-- Theory Questions Sub-section -->
                    <div class="mb-8">
                        <h3 class="text-xl font-bold mb-4">Theory Questions (Multiple Choice)</h3>
                        <div id="theoryQuestionContainer" class="space-y-6">
                            <!-- Questions will be loaded here by JS -->
                        </div>
                        <button id="nextTheoryQuestion" class="mt-6 bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">Next Question</button>
                    </div>

                    <!-- Calculation Questions Sub-section -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">Calculation Questions</h3>
                        <div id="calculationQuestionContainer" class="space-y-6">
                            <!-- All calculation questions will be loaded here by JS -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Navigation
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.dataset.target;

                    navLinks.forEach(nav => nav.classList.remove('active'));
                    link.classList.add('active');

                    contentSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetId) {
                            section.classList.add('active');
                        }
                    });
                });
            });

            // EOQ Calculator
            const eoqD = document.getElementById('eoqD');
            const eoqS = document.getElementById('eoqS');
            const eoqH = document.getElementById('eoqH');
            const eoqResult = document.getElementById('eoqResult');
            let eoqChart;

            function calculateAndDisplayEOQ() {
                const D = parseFloat(eoqD.value) || 0;
                const S = parseFloat(eoqS.value) || 0;
                const H = parseFloat(eoqH.value) || 0;

                if (D > 0 && S > 0 && H > 0) {
                    const eoq = Math.sqrt((2 * D * S) / H);
                    eoqResult.textContent = `${eoq.toFixed(2)} units`;
                    updateEOQChart(D, S, H, eoq);
                } else {
                    eoqResult.textContent = 'Invalid input';
                    if (eoqChart) eoqChart.destroy();
                }
            }
            
            function updateEOQChart(D, S, H, eoq) {
                const ctx = document.getElementById('eoqChart').getContext('2d');
                const range = eoq * 2;
                const step = range / 20;
                const labels = [];
                const holdingCosts = [];
                const orderingCosts = [];
                const totalCosts = [];

                for (let q = step; q <= range; q += step) {
                    labels.push(q.toFixed(0));
                    const holdingCost = (q / 2) * H;
                    const orderingCost = (D / q) * S;
                    holdingCosts.push(holdingCost);
                    orderingCosts.push(orderingCost);
                    totalCosts.push(holdingCost + orderingCost);
                }

                if (eoqChart) {
                    eoqChart.destroy();
                }

                eoqChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Total Cost',
                                data: totalCosts,
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                borderWidth: 3,
                                tension: 0.1
                            },
                            {
                                label: 'Holding Cost',
                                data: holdingCosts,
                                borderColor: '#f59e0b',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                tension: 0.1
                            },
                             {
                                label: 'Ordering Cost',
                                data: orderingCosts,
                                borderColor: '#10b981',
                                borderWidth: 2,
                                borderDash: [5, 5],
                                tension: 0.1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: { display: true, text: 'Inventory Costs vs. Order Quantity' },
                            tooltip: { mode: 'index', intersect: false,
                                callbacks: {
                                    title: function(tooltipItems) {
                                        return 'Quantity: ' + tooltipItems[0].label;
                                    },
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.y);
                                        }
                                        return label;
                                    }
                                }
                            },
                            legend: { position: 'bottom'}
                        },
                        scales: {
                            x: { title: { display: true, text: 'Order Quantity (units)' }},
                            y: { title: { display: true, text: 'Cost ($)' }}
                        }
                    }
                });
            }

            [eoqD, eoqS, eoqH].forEach(el => el.addEventListener('input', calculateAndDisplayEOQ));
            calculateAndDisplayEOQ();

            // ROP Calculator
            const ropAvgDemand = document.getElementById('ropAvgDemand');
            const ropLeadTime = document.getElementById('ropLeadTime');
            const ropMaxDemand = document.getElementById('ropMaxDemand');
            const ropMaxLeadTime = document.getElementById('ropMaxLeadTime');
            const safetyStockResult = document.getElementById('safetyStockResult');
            const ropResult = document.getElementById('ropResult');

            function calculateAndDisplayROP() {
                const avgD = parseFloat(ropAvgDemand.value) || 0;
                const avgLT = parseFloat(ropLeadTime.value) || 0;
                const maxD = parseFloat(ropMaxDemand.value) || 0;
                const maxLT = parseFloat(ropMaxLeadTime.value) || 0;

                const safetyStock = (maxD * maxLT) - (avgD * avgLT);
                const rop = (avgD * avgLT) + safetyStock;

                safetyStockResult.textContent = `${safetyStock >= 0 ? safetyStock.toFixed(0) : 0} units`;
                ropResult.textContent = `${rop >= 0 ? rop.toFixed(0) : 0} units`;
            }
            
            [ropAvgDemand, ropLeadTime, ropMaxDemand, ropMaxLeadTime].forEach(el => el.addEventListener('input', calculateAndDisplayROP));
            calculateAndDisplayROP();
            
            // Metrics Calculator
            const metricsCOGS = document.getElementById('metricsCOGS');
            const metricsBeginInv = document.getElementById('metricsBeginInv');
            const metricsEndInv = document.getElementById('metricsEndInv');
            const itrResult = document.getElementById('itrResult');
            const dsiResult = document.getElementById('dsiResult');
            
            function calculateAndDisplayMetrics() {
                const cogs = parseFloat(metricsCOGS.value) || 0;
                const beginInv = parseFloat(metricsBeginInv.value) || 0;
                const endInv = parseFloat(metricsEndInv.value) || 0;
                
                if (cogs > 0 && (beginInv + endInv) > 0) {
                    const avgInv = (beginInv + endInv) / 2;
                    const itr = cogs / avgInv;
                    const dsi = (avgInv / cogs) * 365;
                    
                    itrResult.textContent = `${itr.toFixed(2)} times`;
                    dsiResult.textContent = `${dsi.toFixed(0)} days`;
                } else {
                    itrResult.textContent = 'N/A';
                    dsiResult.textContent = 'N/A';
                }
            }
            
            [metricsCOGS, metricsBeginInv, metricsEndInv].forEach(el => el.addEventListener('input', calculateAndDisplayMetrics));
            calculateAndDisplayMetrics();
            
            // ABC Analysis
            const abcTableBody = document.getElementById('abcTableBody');
            const addAbcRowBtn = document.getElementById('addAbcRow');
            const abcResults = document.getElementById('abcResults');
            let abcChart;

            let abcData = [
                { name: 'Item A', demand: 1000, cost: 50 },
                { name: 'Item B', demand: 5000, cost: 5 },
                { name: 'Item C', demand: 200, cost: 100 },
                { name: 'Item D', demand: 800, cost: 20 },
                { name: 'Item E', demand: 10000, cost: 1 }
            ];

            function addAbcRow(item = { name: '', demand: '', cost: '' }) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-4 py-2"><input type="text" class="abc-name w-full bg-transparent" value="${item.name}" placeholder="Item Name"></td>
                    <td class="px-4 py-2"><input type="number" class="abc-demand w-full bg-transparent" value="${item.demand}" placeholder="0"></td>
                    <td class="px-4 py-2"><input type="number" class="abc-cost w-full bg-transparent" value="${item.cost}" placeholder="0.00"></td>
                    <td class="px-4 py-2"><button class="remove-abc-row text-red-500 hover:text-red-700 font-bold">X</button></td>
                `;
                abcTableBody.appendChild(row);

                row.querySelector('.remove-abc-row').addEventListener('click', () => {
                    row.remove();
                    calculateAndDisplayABC();
                });
                
                row.querySelectorAll('input').forEach(input => {
                    input.addEventListener('input', calculateAndDisplayABC);
                });
            }

            function calculateAndDisplayABC() {
                let items = [];
                abcTableBody.querySelectorAll('tr').forEach(row => {
                    const name = row.querySelector('.abc-name').value || 'Unnamed';
                    const demand = parseFloat(row.querySelector('.abc-demand').value) || 0;
                    const cost = parseFloat(row.querySelector('.abc-cost').value) || 0;
                    if (demand > 0 && cost > 0) {
                        items.push({ name, demand, cost, auv: demand * cost });
                    }
                });

                items.sort((a, b) => b.auv - a.auv);

                const totalAuv = items.reduce((sum, item) => sum + item.auv, 0);
                if (totalAuv === 0) {
                    abcResults.innerHTML = '<p class="text-gray-500">Enter valid data to see results.</p>';
                    if(abcChart) abcChart.destroy();
                    return;
                }

                let cumulativeAuv = 0;
                const aItems = [], bItems = [], cItems = [];
                
                items.forEach(item => {
                    cumulativeAuv += item.auv;
                    const cumulativePercent = (cumulativeAuv / totalAuv) * 100;
                    if (cumulativePercent <= 80) { // Class A up to 80% of value
                        item.class = 'A';
                        aItems.push(item);
                    } else if (cumulativePercent <= 95) { // Class B up to 95% of value
                        item.class = 'B';
                        bItems.push(item);
                    } else { // Class C for remaining
                        item.class = 'C';
                        cItems.push(item);
                    }
                });

                displayAbcResults(items);
                updateAbcChart(aItems, bItems, cItems, totalAuv);
            }

            function displayAbcResults(items) {
                abcResults.innerHTML = '';
                if (items.length === 0) {
                    abcResults.innerHTML = '<p class="text-gray-500">No items to classify. Add items above.</p>';
                    return;
                }
                items.forEach(item => {
                    const p = document.createElement('p');
                    let colorClass = '';
                    if (item.class === 'A') colorClass = 'text-red-600 font-bold';
                    else if (item.class === 'B') colorClass = 'text-yellow-600 font-semibold';
                    else colorClass = 'text-green-600';

                    p.className = `text-sm ${colorClass}`;
                    p.innerHTML = `<span>${item.name}</span>: <span class="float-right">Class ${item.class} (Value: $${item.auv.toLocaleString()})</span>`;
                    abcResults.appendChild(p);
                });
            }
            
            function updateAbcChart(aItems, bItems, cItems, totalAuv) {
                const ctx = document.getElementById('abcChart').getContext('2d');
                
                const aValue = aItems.reduce((sum, i) => sum + i.auv, 0);
                const bValue = bItems.reduce((sum, i) => sum + i.auv, 0);
                const cValue = cItems.reduce((sum, i) => sum + i.auv, 0);

                if (abcChart) {
                    abcChart.destroy();
                }

                abcChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: [
                            `Class A (${aItems.length} items)`,
                            `Class B (${bItems.length} items)`,
                            `Class C (${cItems.length} items)`
                        ],
                        datasets: [{
                            label: 'Value Distribution',
                            data: [
                                (aValue / totalAuv * 100).toFixed(2),
                                (bValue / totalAuv * 100).toFixed(2),
                                (cValue / totalAuv * 100).toFixed(2)
                            ],
                            backgroundColor: ['#ef4444', '#f59e0b', '#10b981'],
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: { display: true, text: 'ABC - Value Distribution (%)' },
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed + '%';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            addAbcRowBtn.addEventListener('click', () => addAbcRow());
            abcData.forEach(item => addAbcRow(item));
            calculateAndDisplayABC();

            // Exam Questions Logic
            const theoryQuestions = [
                {
                    question: "What is the primary objective of inventory management?",
                    options: [
                        { text: "To maximize the amount of inventory on hand.", isCorrect: false, explanation: "Maximizing inventory leads to high holding costs and risks of obsolescence. The goal is to optimize, not maximize." },
                        { text: "To minimize total inventory costs while meeting demand.", isCorrect: true },
                        { text: "To eliminate all inventory from the supply chain.", isCorrect: false, explanation: "Eliminating all inventory is the goal of a pure Just-in-Time (JIT) system, but it's often impractical and risky for most operations, as it leaves no buffer for unexpected events." },
                        { text: "To ensure all products are always available, regardless of cost.", isCorrect: false, explanation: "Ensuring 100% availability regardless of cost is impractical and would lead to extremely high holding costs. Inventory management aims for a balance between service level and cost." }
                    ]
                },
                {
                    question: "Which of the following is considered a 'holding cost' in inventory management?",
                    options: [
                        { text: "Cost of placing a purchase order.", isCorrect: false, explanation: "The cost of placing a purchase order is an 'ordering cost', incurred each time an order is made." },
                        { text: "Freight charges for inbound shipments.", isCorrect: false, explanation: "Freight charges for inbound shipments are typically part of 'ordering costs' or 'acquisition costs', not holding costs." },
                        { text: "Insurance on stored goods.", isCorrect: true },
                        { text: "Cost of expediting an urgent order.", isCorrect: false, explanation: "The cost of expediting an urgent order is a 'shortage' or 'stockout cost', incurred when demand cannot be met from existing inventory." }
                    ]
                },
                {
                    question: "The Economic Order Quantity (EOQ) model aims to minimize the sum of which two costs?",
                    options: [
                        { text: "Purchase cost and shortage cost.", isCorrect: false, explanation: "The EOQ model primarily focuses on the trade-off between 'holding costs' and 'ordering costs' to find the optimal order quantity. Purchase cost is generally assumed constant per unit, and shortage costs are assumed to be avoided." },
                        { text: "Holding cost and ordering cost.", isCorrect: true },
                        { text: "Labor cost and material cost.", isCorrect: false, explanation: "Labor cost and material cost are typically production costs, not directly optimized by the EOQ model, which focuses on inventory-related costs." },
                        { text: "Transportation cost and administrative cost.", isCorrect: false, explanation: "While transportation and administrative costs are components of 'ordering costs', this option doesn't capture the full scope of the two primary costs EOQ balances, which are holding and ordering costs." }
                    ]
                },
                {
                    question: "What does a high Inventory Turnover Ratio (ITR) generally indicate?",
                    options: [
                        { text: "The company is holding too much inventory.", isCorrect: false, explanation: "A high Inventory Turnover Ratio (ITR) suggests that inventory is being sold and replaced quickly, which typically indicates efficient inventory management, not overstocking." },
                        { text: "Slow-moving inventory and weak sales.", isCorrect: false, explanation: "Slow-moving inventory and weak sales would result in a low Inventory Turnover Ratio (ITR), as inventory is not being sold and replaced frequently." },
                        { text: "Efficient inventory management and strong sales.", isCorrect: true },
                        { text: "Frequent stockouts and lost sales.", isCorrect: false, explanation: "While a very high ITR *can* sometimes indicate insufficient stock leading to stockouts, a high ITR *generally* points to efficient management and strong sales, assuming demand is being met." }
                    ]
                },
                {
                    question: "Which inventory classification method is based on the Pareto Principle?",
                    options: [
                        { text: "Just-in-Time (JIT).", isCorrect: false, explanation: "Just-in-Time (JIT) is an inventory philosophy focused on minimizing inventory by receiving goods only when needed, not a classification method based on value." },
                        { text: "Economic Order Quantity (EOQ).", isCorrect: false, explanation: "Economic Order Quantity (EOQ) is a model for calculating optimal order size, not a method for classifying inventory items by value." },
                        { text: "Reorder Point (ROP).", isCorrect: false, explanation: "Reorder Point (ROP) is a calculation that determines when to place an order, not a method for classifying inventory items." },
                        { text: "ABC Analysis.", isCorrect: true }
                    ]
                },
                {
                    question: "What is the primary purpose of 'safety stock'?",
                    options: [
                        { text: "To reduce ordering costs.", isCorrect: false, explanation: "Safety stock is held to mitigate uncertainty in demand or lead time, not primarily to reduce ordering costs. EOQ focuses on ordering costs." },
                        { text: "To ensure 100% customer service level at all times.", isCorrect: false, explanation: "While safety stock aims to improve service level, ensuring 100% service level is often prohibitively expensive and not the *primary* purpose; it's to *reduce the risk* of stockouts due to variability." },
                        { text: "To act as a buffer against unexpected demand or lead time variations.", isCorrect: true },
                        { text: "To take advantage of quantity discounts.", isCorrect: false, explanation: "Taking advantage of quantity discounts might lead to holding more inventory, but it's not the core purpose of safety stock, which is about managing uncertainty." }
                    ]
                },
                {
                    question: "If a company switches from a periodic inventory system to a perpetual inventory system, what is a likely benefit?",
                    options: [
                        { text: "Reduced holding costs.", isCorrect: false, explanation: "Switching inventory systems doesn't directly reduce holding costs; rather, it changes how inventory is tracked. Holding costs are influenced by the quantity of inventory held." },
                        { text: "More accurate real-time inventory data.", isCorrect: true },
                        { text: "Elimination of lead time variability.", isCorrect: false, explanation: "Inventory systems manage data, they do not eliminate external factors like lead time variability from suppliers." },
                        { text: "Lower ordering costs.", isCorrect: false, explanation: "Switching to a perpetual system doesn't inherently lower ordering costs; it improves tracking. Ordering costs are reduced by placing fewer, larger orders (like with EOQ)." }
                    ]
                },
                {
                    question: "Which of the following is a potential consequence of a 'stockout'?",
                    options: [
                        { text: "Increased holding costs.", isCorrect: false, explanation: "Increased holding costs occur when there's *too much* inventory. A stockout means there's *not enough* inventory." },
                        { text: "Lower ordering costs.", isCorrect: false, explanation: "Lower ordering costs result from placing fewer orders. A stockout is a result of not having enough stock, which might even lead to *expedited* orders, increasing costs." },
                        { text: "Loss of customer goodwill.", isCorrect: true },
                        { text: "Improved inventory turnover.", isCorrect: false, explanation: "A stockout means you can't sell, which would negatively impact or prevent inventory turnover, not improve it." }
                    ]
                },
                {
                    question: "In the context of EOQ, what does the 'D' represent?",
                    options: [
                        { text: "Daily Demand.", isCorrect: false, explanation: "While demand is involved, 'D' in the standard EOQ formula represents 'Annual Demand'." },
                        { text: "Delivery cost.", isCorrect: false, explanation: "Delivery cost is typically part of 'ordering cost' (S) or unit cost, not represented by 'D'." },
                        { text: "Annual Demand.", isCorrect: true },
                        { text: "Discount percentage.", isCorrect: false, explanation: "The basic EOQ model assumes no quantity discounts, so 'D' does not represent a discount percentage." }
                    ]
                },
                {
                    question: "What is the primary characteristic of 'Class C' items in ABC Analysis?",
                    options: [
                        { text: "They are high-value items requiring tight control.", isCorrect: false, explanation: "High-value items requiring tight control are characteristic of 'Class A' items." },
                        { text: "They represent a large percentage of total items but a small percentage of total inventory value.", isCorrect: true },
                        { text: "They are medium-value items with moderate control.", isCorrect: false, explanation: "Medium-value items with moderate control are characteristic of 'Class B' items." },
                        { text: "They are critical components with zero stockout tolerance.", isCorrect: false, explanation: "Critical components with zero stockout tolerance are typically 'Class A' items due to their high importance, not 'Class C'." }
                    ]
                }
                // NOTE: This is a sample set of 10 questions. To reach 50+ as requested,
                // you would add more question objects following this structure.
            ];

            const calculationQuestions = [
                {
                    question: "1. Calculate the EOQ for a product with an annual demand of 15,000 units, an ordering cost of $75 per order, and an annual holding cost of $3 per unit.",
                    solution: `
                        <strong>Formula:</strong> EOQ = &radic;(2DS/H)<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Annual Demand (D) = 15,000 units</li>
                            <li>Ordering Cost (S) = $75 per order</li>
                            <li>Holding Cost (H) = $3 per unit per year</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        EOQ = &radic;((2 &times; 15,000 &times; 75) / 3)<br>
                        EOQ = &radic;(2,250,000 / 3)<br>
                        EOQ = &radic;(750,000)<br>
                        EOQ &approx; 866.03<br><br>

                        <strong>Answer:</strong> The Economic Order Quantity (EOQ) is approximately <strong>866.03 units</strong>.
                    `
                },
                {
                    question: "2. A company's average daily demand is 20 units and the lead time is 7 days. If they maintain a safety stock of 50 units, what is their Reorder Point (ROP)?",
                    solution: `
                        <strong>Formula:</strong> ROP = (Average Daily Demand &times; Lead Time) + Safety Stock<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Average Daily Demand = 20 units</li>
                            <li>Lead Time = 7 days</li>
                            <li>Safety Stock = 50 units</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        ROP = (20 &times; 7) + 50<br>
                        ROP = 140 + 50<br>
                        ROP = 190<br><br>

                        <strong>Answer:</strong> The Reorder Point (ROP) is <strong>190 units</strong>.
                    `
                },
                {
                    question: "3. Calculate the Safety Stock given: Maximum Daily Usage = 40 units, Average Daily Usage = 30 units, Maximum Lead Time = 10 days, Average Lead Time = 8 days.",
                    solution: `
                        <strong>Formula:</strong> Safety Stock = (Maximum Daily Usage &times; Maximum Lead Time) - (Average Daily Usage &times; Average Lead Time)<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Maximum Daily Usage = 40 units</li>
                            <li>Average Daily Usage = 30 units</li>
                            <li>Maximum Lead Time = 10 days</li>
                            <li>Average Lead Time = 8 days</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        Safety Stock = (40 &times; 10) - (30 &times; 8)<br>
                        Safety Stock = 400 - 240<br>
                        Safety Stock = 160<br><br>

                        <strong>Answer:</strong> The Safety Stock is <strong>160 units</strong>.
                    `
                },
                {
                    question: "4. A company had a Cost of Goods Sold (COGS) of $800,000. Their beginning inventory was $100,000 and ending inventory was $150,000. Calculate their Inventory Turnover Ratio (ITR).",
                    solution: `
                        <strong>Step 1: Calculate Average Inventory Value</strong><br>
                        <strong>Formula:</strong> Average Inventory Value = (Beginning Inventory Value + Ending Inventory Value) / 2<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Beginning Inventory = $100,000</li>
                            <li>Ending Inventory = $150,000</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        Average Inventory Value = (100,000 + 150,000) / 2 = 250,000 / 2 = 125,000<br><br>

                        <strong>Step 2: Calculate Inventory Turnover Ratio (ITR)</strong><br>
                        <strong>Formula:</strong> ITR = Cost of Goods Sold (COGS) / Average Inventory Value<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>COGS = $800,000</li>
                            <li>Average Inventory = $125,000</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        ITR = 800,000 / 125,000 = 6.4<br><br>

                        <strong>Answer:</strong> The Inventory Turnover Ratio (ITR) is <strong>6.4 times</strong>.
                    `
                },
                {
                    question: "5. Using the data from the previous question (COGS = $800,000, Average Inventory = $125,000), calculate the Days Sales of Inventory (DSI).",
                    solution: `
                        <strong>Formula:</strong> DSI = (Average Inventory Value / Cost of Goods Sold (COGS)) &times; 365 days<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Average Inventory = $125,000</li>
                            <li>COGS = $800,000</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        DSI = (125,000 / 800,000) &times; 365<br>
                        DSI = 0.15625 &times; 365<br>
                        DSI &approx; 57.03<br><br>

                        <strong>Answer:</strong> The Days Sales of Inventory (DSI) is approximately <strong>57 days</strong>.
                    `
                },
                {
                    question: "6. A company has an annual demand of 20,000 units for a product. The ordering cost is $60 per order, and the holding cost is $0.75 per unit per year. Calculate the EOQ.",
                    solution: `
                        <strong>Formula:</strong> EOQ = &radic;(2DS/H)<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Annual Demand (D) = 20,000 units</li>
                            <li>Ordering Cost (S) = $60 per order</li>
                            <li>Holding Cost (H) = $0.75 per unit per year</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><<br>
                        EOQ = &radic;((2 &times; 20,000 &times; 60) / 0.75)<br>
                        EOQ = &radic;(2,400,000 / 0.75)<br>
                        EOQ = &radic;(3,200,000)<br>
                        EOQ &approx; 1788.85<br><br>

                        <strong>Answer:</strong> The Economic Order Quantity (EOQ) is approximately <strong>1788.85 units</strong>.
                    `
                },
                {
                    question: "7. If the ROP is 300 units, the average daily demand is 25 units, and there is no safety stock, what is the lead time in days?",
                    solution: `
                        <strong>Formula (without Safety Stock):</strong> ROP = Average Daily Demand &times; Lead Time<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>ROP = 300 units</li>
                            <li>Average Daily Demand = 25 units</li>
                            <li>Safety Stock = 0</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        300 = 25 &times; Lead Time<br>
                        Lead Time = 300 / 25<br>
                        Lead Time = 12<br><br>

                        <strong>Answer:</strong> The Lead Time is <strong>12 days</strong>.
                    `
                },
                {
                    question: "8. A company's COGS is $1,500,000. Their average inventory value is $250,000. Calculate their Inventory Turnover Ratio (ITR).",
                    solution: `
                        <strong>Formula:</strong> ITR = COGS / Average Inventory Value<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>COGS = $1,500,000</li>
                            <li>Average Inventory = $250,000</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        ITR = 1,500,000 / 250,000 = 6<br><br>

                        <strong>Answer:</strong> The Inventory Turnover Ratio (ITR) is <strong>6 times</strong>.
                    `
                },
                {
                    question: "9. An item has an annual demand of 500 units and a unit cost of $150. Calculate its Annual Usage Value (AUV) for ABC Analysis.",
                    solution: `
                        <strong>Formula:</strong> AUV = Annual Demand (units) &times; Unit Cost<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>Annual Demand = 500 units</li>
                            <li>Unit Cost = $150</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        AUV = 500 &times; 150 = 75,000<br><br>

                        <strong>Answer:</strong> The Annual Usage Value (AUV) for the item is <strong>$75,000</strong>.
                    `
                },
                {
                    question: "10. If a company has an ITR of 10 and its COGS is $900,000, what is its Average Inventory Value?",
                    solution: `
                        <strong>Formula:</strong> ITR = COGS / Average Inventory Value<br>
                        <strong>Given:</strong><br>
                        <ul>
                            <li>ITR = 10</li>
                            <li>COGS = $900,000</li>
                        </ul>
                        <br>
                        <strong>Calculation:</strong><br>
                        10 = 900,000 / Average Inventory Value<br>
                        Average Inventory Value = 900,000 / 10 = 90,000<br><br>

                        <strong>Answer:</strong> The Average Inventory Value is <strong>$90,000</strong>.
                    `
                }
                // NOTE: This is a sample set of 10 questions. To reach 50+ as requested,
                // you would add more question objects following this structure.
            ];

            let currentTheoryQuestionIndex = 0;

            const theoryQuestionContainer = document.getElementById('theoryQuestionContainer');
            const nextTheoryQuestionBtn = document.getElementById('nextTheoryQuestion');
            const calculationQuestionContainer = document.getElementById('calculationQuestionContainer');
            
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            // Shuffle only theory questions for random progression
            shuffleArray(theoryQuestions); 

            function loadTheoryQuestion(index) {
                theoryQuestionContainer.innerHTML = ''; // Clear previous question
                if (index < theoryQuestions.length) {
                    const qData = theoryQuestions[index];
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'bg-amber-50 p-6 rounded-lg shadow-md';
                    questionDiv.innerHTML = `
                        <p class="text-lg font-semibold mb-4">Question ${index + 1}: ${qData.question}</p>
                        <div class="space-y-3" role="radiogroup">
                            ${qData.options.map((option, i) => `
                                <label class="flex items-center cursor-pointer p-2 rounded-md hover:bg-amber-100">
                                    <input type="radio" name="theory-option-${index}" value="${i}" class="form-radio h-4 w-4 text-blue-600">
                                    <span class="ml-3 text-gray-700">${option.text}</span>
                                </label>
                            `).join('')}
                        </div>
                        <div id="feedback-${index}" class="question-feedback hidden"></div>
                    `;
                    theoryQuestionContainer.appendChild(questionDiv);

                    const feedbackDiv = document.getElementById(`feedback-${index}`);
                    questionDiv.querySelectorAll(`input[name="theory-option-${index}"]`).forEach(radio => {
                        radio.addEventListener('change', (e) => {
                            const selectedOptionIndex = parseInt(e.target.value);
                            const selectedOption = qData.options[selectedOptionIndex];

                            feedbackDiv.classList.remove('hidden', 'correct', 'wrong');
                            if (selectedOption.isCorrect) {
                                feedbackDiv.classList.add('correct');
                                feedbackDiv.innerHTML = '<strong>Correct!</strong> Well done.';
                                questionDiv.querySelectorAll('input[type="radio"]').forEach(r => r.disabled = true); // Disable after correct answer
                            } else {
                                feedbackDiv.classList.add('wrong');
                                feedbackDiv.innerHTML = `<strong>Wrong!</strong> "${selectedOption.text}" is not the correct answer. ${selectedOption.explanation || ''} Please try again.`;
                            }
                        });
                    });
                } else {
                    theoryQuestionContainer.innerHTML = '<p class="text-lg text-gray-600 text-center">You have completed all theory questions!</p>';
                    nextTheoryQuestionBtn.disabled = true;
                }
            }

            function loadAllCalculationQuestions() {
                calculationQuestionContainer.innerHTML = '';
                calculationQuestions.forEach((qData, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'bg-amber-50 p-6 rounded-lg shadow-md';
                    questionDiv.innerHTML = `
                        <p class="text-lg font-semibold mb-4">${qData.question}</p>
                        <button class="show-solution-btn bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">Show Answer</button>
                        <div class="solution-container">
                            <h4 class="text-lg font-semibold text-blue-700 mb-2">Detailed Solution:</h4>
                            <div class="text-gray-800">${qData.solution}</div>
                        </div>
                    `;
                    calculationQuestionContainer.appendChild(questionDiv);

                    questionDiv.querySelector('.show-solution-btn').addEventListener('click', (e) => {
                        const solutionContainer = e.target.nextElementSibling;
                        solutionContainer.classList.toggle('active');
                        e.target.textContent = solutionContainer.classList.contains('active') ? 'Hide Answer' : 'Show Answer';
                    });
                });
            }

            nextTheoryQuestionBtn.addEventListener('click', () => {
                currentTheoryQuestionIndex++;
                loadTheoryQuestion(currentTheoryQuestionIndex);
            });

            // Initial loads
            loadTheoryQuestion(currentTheoryQuestionIndex);
            loadAllCalculationQuestions(); // Load all calculation questions at once

            // Service Worker Registration for PWA
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/service-worker.js')
                        .then(registration => {
                            console.log('ServiceWorker registration successful with scope: ', registration.scope);
                        })
                        .catch(err => {
                            console.log('ServiceWorker registration failed: ', err);
                        });
                });
            }
        });
    </script>
</body>
</html>
